<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phone Tracking App</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Leaflet Heat Plugin -->
    <script src="https://cdn.jsdelivr.net/npm/leaflet.heat@0.2.0/dist/leaflet-heat.min.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“± Phone Tracking App</h1>
            <div class="header-controls">
                <button id="darkModeToggle" class="btn-icon" title="Toggle Dark Mode">ğŸŒ™</button>
                <div class="status" id="status">
                    <span class="status-indicator offline"></span>
                    <span id="statusText">Not tracking</span>
                </div>
            </div>
        </div>

        <div class="controls">
            <button id="startTracking" class="btn btn-primary">Start Tracking</button>
            <button id="stopTracking" class="btn btn-danger" disabled>Stop Tracking</button>
            <button id="centerMap" class="btn btn-secondary">Center on Location</button>
            <button id="clearHistory" class="btn btn-warning">Clear History</button>
            <button id="shareLocation" class="btn btn-info">ğŸ“¤ Share Location</button>
            <button id="toggleHeatmap" class="btn btn-secondary">ğŸ”¥ Heatmap</button>
            <div class="map-view-toggle">
                <label for="mapViewSelect">Map View:</label>
                <select id="mapViewSelect" class="view-select">
                    <option value="street">Street Map</option>
                    <option value="satellite">Satellite</option>
                    <option value="hybrid">Hybrid</option>
                    <option value="terrain">Terrain</option>
                    <option value="night">ğŸŒƒ Night Satellite</option>
                </select>
            </div>
        </div>

        <!-- Route Controls -->
        <div class="route-controls">
            <button id="saveRoute" class="btn btn-success">ğŸ’¾ Save Route</button>
            <button id="loadRoute" class="btn btn-info">ğŸ“‚ Load Route</button>
            <button id="playbackRoute" class="btn btn-secondary" disabled>â–¶ï¸ Playback</button>
            <button id="pausePlayback" class="btn btn-warning" disabled>â¸ï¸ Pause</button>
            <input type="range" id="playbackSpeed" min="1" max="10" value="5" class="playback-slider" disabled>
            <span id="playbackSpeedLabel">Speed: 5x</span>
        </div>

        <!-- Geofence Controls -->
        <div class="geofence-controls">
            <h3>ğŸš§ Geofencing</h3>
            <div class="geofence-inputs">
                <input type="text" id="geofenceName" placeholder="Fence name (e.g., Home)" class="geofence-input">
                <input type="number" id="geofenceRadius" placeholder="Radius (meters)" value="100" class="geofence-input">
                <button id="createGeofence" class="btn btn-primary">â• Add Geofence</button>
            </div>
            <div id="geofenceList" class="geofence-list"></div>
        </div>

        <div class="info-panel">
            <div class="info-item">
                <label>Latitude:</label>
                <span id="latitude">--</span>
            </div>
            <div class="info-item">
                <label>Longitude:</label>
                <span id="longitude">--</span>
            </div>
            <div class="info-item">
                <label>Accuracy:</label>
                <span id="accuracy" class="accuracy-indicator">--</span>
            </div>
            <div class="info-item">
                <label>Last Update:</label>
                <span id="lastUpdate">--</span>
            </div>
            <div class="info-item">
                <label>Speed:</label>
                <span id="speed">--</span>
            </div>
            <div class="info-item">
                <label>Altitude:</label>
                <span id="altitude">--</span>
            </div>
            <div class="info-item">
                <label>Heading:</label>
                <span id="heading">--</span>
            </div>
            <div class="info-item">
                <label>GPS Quality:</label>
                <span id="gpsQuality">--</span>
            </div>
        </div>

        <!-- GPS Tips -->
        <div class="gps-tips">
            <strong>ğŸ“ GPS Tips for Better Accuracy:</strong>
            <ul>
                <li>Go outdoors with clear view of the sky</li>
                <li>Stay away from tall buildings and trees</li>
                <li>Wait 30-60 seconds for GPS to stabilize</li>
                <li>Disable WiFi-only location mode</li>
                <li>Enable High Accuracy mode in device settings</li>
            </ul>
        </div>

        <div id="map"></div>

        <div class="history-panel">
            <h3>Location History</h3>
            <div id="historyList"></div>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Custom JS -->
    <script src="tracking.js"></script>
</body>
</html>
